var Re=Object.defineProperty;var Le=Object.getOwnPropertySymbols;var Te=Object.prototype.hasOwnProperty,ze=Object.prototype.propertyIsEnumerable;var Me=(e,s,t)=>s in e?Re(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,Ce=(e,s)=>{for(var t in s||(s={}))Te.call(s,t)&&Me(e,t,s[t]);if(Le)for(var t of Le(s))ze.call(s,t)&&Me(e,t,s[t]);return e};import{C as ne,S as Ve,i as qe,s as He,e as u,c as p,a as y,d as o,b as c,f as K,I as Ee,J as xe,A as Fe,K as Ke,L as Je,z as Qe,k,t as d,j as Ze,M as Xe,n as C,g as h,m as Ye,N as Ne,E as r,O as Ue,o as et,P as We,h as z,x as tt,u as rt,v as st,Q as at,R as lt}from"../chunks/vendor-76ca8483.js";const Be=ne({}),nt=async e=>{if(Object.keys(e).length===0)return;const s={temperatures:e.daily.map(t=>{var l;return(l=t==null?void 0:t.temp)==null?void 0:l.day}),labels:e.daily.map(t=>new Date((t==null?void 0:t.dt)*1e3).toLocaleDateString()),humidities:e.daily.map(t=>t==null?void 0:t.humidity),pressures:e.daily.map(t=>t==null?void 0:t.pressure)};Be.set(s)},De=ne({}),ot=async e=>{var g,n;if(Object.keys(e).length===0)return;const s="420cf3bc48a83bc3beed2e87e4735ec6",t=`https://api.openweathermap.org/data/2.5/onecall?lat=${e.lat}&lon=${e.lon}&units=metric&exclude=hourly,minutely,alerts&appid=${s}`,l=await fetch(t),f=await l.json();if(l.ok){const _={name:e.name,country:e.country,iconUrl:`https://openweathermap.org/img/wn/${(n=(g=f.current)==null?void 0:g.weather[0])==null?void 0:n.icon}@4x.png`},v=Ce(Ce({},f),_);De.set(v)}};De.subscribe(e=>{!e||nt(e)});const Ge=ne({}),it=async e=>{if(!e)return;const t=`https://api.openweathermap.org/geo/1.0/direct?q=${e}&appid=420cf3bc48a83bc3beed2e87e4735ec6`,l=await fetch(t),f=await l.json();if(l.ok){const g=f.map(n=>({name:n.name,country:n.country,lat:n.lat,lon:n.lon}));Ge.set(g[0])}};Ge.subscribe(e=>{!e||Object.keys(e).length===0||ot(e)});const Pe=ne(sessionStorage.getItem("city")||"Berlin");Pe.subscribe(e=>{sessionStorage.setItem("city",e),it(e)});function ct(e){let s;return{c(){s=u("canvas"),this.h()},l(t){s=p(t,"CANVAS",{id:!0,width:!0,height:!0}),y(s).forEach(o),this.h()},h(){c(s,"id","weatherChart"),c(s,"width","2"),c(s,"height","1")},m(t,l){K(t,s,l)},p:Ee,i:Ee,o:Ee,d(t){t&&o(s)}}}function ut(e,s,t){let l;xe(e,Be,n=>t(1,l=n));let f;Fe(()=>{Ke.register(...Je),g()}),Qe(()=>{f==null||f.destroy(),g()});const g=()=>{let n=document.getElementById("weatherChart").getContext("2d");f=new Ke(n,{type:"line",data:{labels:l.labels,datasets:[{label:"Temperature [\xB0C]",data:l.temperatures,backgroundColor:["rgba(54, 162, 235, 0.2)"],borderColor:["rgba(54, 162, 235, 1)"],borderWidth:2,yAxisID:"y"},{type:"bar",label:"Humidity [%]",data:l.humidities,backgroundColor:["rgba(255, 206, 86, 0.2)"],borderColor:["rgba(255, 206, 86, 1)"],borderWidth:1,yAxisID:"y1"},{label:"Pressure [hPa]",data:l.pressures,backgroundColor:["rgba(255, 99, 132, 0.2)"],borderColor:["rgba(255, 99, 132, 1)"],borderWidth:1,yAxisID:"y2"}]},options:{interaction:{mode:"index",intersect:!1},stacked:!1,scales:{y:{beginAtZero:!0,position:"left",ticks:{callback(_,v,D){return`${_}\xB0C`}}},y1:{position:"right",grid:{drawOnChartArea:!1},ticks:{callback(_,v,D){return`${_}%`}}},y2:{position:"right",grid:{drawOnChartArea:!1},ticks:{callback(_,v,D){return`${_}hPa`}}}}}})};return[]}class pt extends Ve{constructor(s){super();qe(this,s,ut,ct,He,{})}}function dt(e){let s,t,l,f,g,n,_,v,D,m,i,E,F,J,S,w,N,P,L,U,W,I,j,oe,Z,ie,M,X,ce,ue,V,pe,Y,de,he,q,fe,ee,me,be,B,A,te,ye,O,G,_e,ge,H,x,ve,Ie;return H=new pt({}),{c(){s=k(),t=u("section"),l=u("label"),f=d("Location"),g=k(),n=u("input"),_=k(),v=u("hr"),D=k(),m=u("div"),i=u("div"),E=u("p"),F=d(e[8]),J=k(),S=u("p"),w=d(e[7]),N=k(),P=u("p"),L=d(e[6]),U=d("\xB0C"),W=k(),I=u("div"),j=u("p"),oe=d("Feels like "),Z=d(e[3]),ie=d("\xB0C. "),M=u("span"),X=d(e[2]),ce=d("."),ue=k(),V=u("p"),pe=d("Humidity: "),Y=d(e[5]),de=d("%"),he=k(),q=u("p"),fe=d("Pressure: "),ee=d(e[4]),me=d("hPa"),be=k(),B=u("div"),A=u("img"),ye=k(),O=u("div"),G=u("h2"),_e=d("Weather forecast for 7 days"),ge=k(),Ze(H.$$.fragment),this.h()},l(a){Xe('[data-svelte="svelte-1eqwkks"]',document.head).forEach(o),s=C(a),t=p(a,"SECTION",{class:!0});var re=y(t);l=p(re,"LABEL",{class:!0,for:!0});var Ae=y(l);f=h(Ae,"Location"),Ae.forEach(o),g=C(re),n=p(re,"INPUT",{class:!0,type:!0}),re.forEach(o),_=C(a),v=p(a,"HR",{class:!0}),D=C(a),m=p(a,"DIV",{class:!0});var R=y(m);i=p(R,"DIV",{class:!0});var $=y(i);E=p($,"P",{class:!0});var Se=y(E);F=h(Se,e[8]),Se.forEach(o),J=C($),S=p($,"P",{class:!0});var je=y(S);w=h(je,e[7]),je.forEach(o),N=C($),P=p($,"P",{class:!0});var we=y(P);L=h(we,e[6]),U=h(we,"\xB0C"),we.forEach(o),W=C($),I=p($,"DIV",{class:!0});var T=y(I);j=p(T,"P",{});var Q=y(j);oe=h(Q,"Feels like "),Z=h(Q,e[3]),ie=h(Q,"\xB0C. "),M=p(Q,"SPAN",{class:!0});var ke=y(M);X=h(ke,e[2]),ce=h(ke,"."),ke.forEach(o),Q.forEach(o),ue=C(T),V=p(T,"P",{});var se=y(V);pe=h(se,"Humidity: "),Y=h(se,e[5]),de=h(se,"%"),se.forEach(o),he=C(T),q=p(T,"P",{});var ae=y(q);fe=h(ae,"Pressure: "),ee=h(ae,e[4]),me=h(ae,"hPa"),ae.forEach(o),T.forEach(o),$.forEach(o),be=C(R),B=p(R,"DIV",{class:!0});var Oe=y(B);A=p(Oe,"IMG",{src:!0,alt:!0,class:!0}),Oe.forEach(o),ye=C(R),O=p(R,"DIV",{class:!0});var le=y(O);G=p(le,"H2",{class:!0});var $e=y(G);_e=h($e,"Weather forecast for 7 days"),$e.forEach(o),ge=C(le),Ye(H.$$.fragment,le),le.forEach(o),R.forEach(o),this.h()},h(){document.title="Start - Open Weather Map with Svelte",c(l,"class","block mb-2"),c(l,"for","targetNumber"),c(n,"class","rounded w-full"),c(n,"type","text"),c(t,"class","mx-auto max-w-xl px-8"),c(v,"class","mt-6 mb-3 border-gray-300"),c(E,"class","text-sm text-blue-600"),c(S,"class","text-2xl text-gray-700 font-semibold tracking-wider"),c(P,"class","text-2xl"),c(M,"class","capitalize"),c(I,"class","mt-2 pl-4 border-l-2 border-blue-600"),c(i,"class","min-w-60"),Ne(A.src,te=e[1])||c(A,"src",te),c(A,"alt","weather icon"),c(A,"class","w-52 h-52"),c(B,"class","flex justify-center items-center"),c(G,"class","text-center text-2xl mb-4"),c(O,"class","flex-1 min-w-full my-12 border-l-2 border-blue-600"),c(m,"class","flex flex-wrap justify-between mx-auto max-w-xl px-8")},m(a,b){K(a,s,b),K(a,t,b),r(t,l),r(l,f),r(t,g),r(t,n),Ue(n,e[0]),K(a,_,b),K(a,v,b),K(a,D,b),K(a,m,b),r(m,i),r(i,E),r(E,F),r(i,J),r(i,S),r(S,w),r(i,N),r(i,P),r(P,L),r(P,U),r(i,W),r(i,I),r(I,j),r(j,oe),r(j,Z),r(j,ie),r(j,M),r(M,X),r(M,ce),r(I,ue),r(I,V),r(V,pe),r(V,Y),r(V,de),r(I,he),r(I,q),r(q,fe),r(q,ee),r(q,me),r(m,be),r(m,B),r(B,A),r(m,ye),r(m,O),r(O,G),r(G,_e),r(O,ge),et(H,O,null),x=!0,ve||(Ie=[We(n,"input",e[11]),We(n,"keydown",e[9])],ve=!0)},p(a,[b]){b&1&&n.value!==a[0]&&Ue(n,a[0]),(!x||b&128)&&z(w,a[7]),(!x||b&64)&&z(L,a[6]),(!x||b&8)&&z(Z,a[3]),(!x||b&4)&&z(X,a[2]),(!x||b&32)&&z(Y,a[5]),(!x||b&16)&&z(ee,a[4]),(!x||b&2&&!Ne(A.src,te=a[1]))&&c(A,"src",te)},i(a){x||(tt(H.$$.fragment,a),x=!0)},o(a){rt(H.$$.fragment,a),x=!1},d(a){a&&o(s),a&&o(t),a&&o(_),a&&o(v),a&&o(D),a&&o(m),st(H),ve=!1,at(Ie)}}}function ht(e,s,t){let l,f,g,n,_,v,D,m,i;xe(e,Pe,w=>t(12,m=w)),xe(e,De,w=>t(10,i=w));let E=m,F=new Date().toLocaleString();const J=w=>{w.keyCode===13&&lt(Pe,m=E,m)};function S(){E=this.value,t(0,E)}return e.$$.update=()=>{var w,N,P,L,U,W;e.$$.dirty&1024&&t(7,l=`${i.name}, ${i.country}`),e.$$.dirty&1024&&t(6,f=Math.round((w=i.current)==null?void 0:w.temp)),e.$$.dirty&1024&&t(5,g=(N=i.current)==null?void 0:N.humidity),e.$$.dirty&1024&&t(4,n=(P=i.current)==null?void 0:P.pressure),e.$$.dirty&1024&&t(3,_=Math.round((L=i.current)==null?void 0:L.feels_like)),e.$$.dirty&1024&&t(2,v=(W=(U=i.current)==null?void 0:U.weather[0])==null?void 0:W.description),e.$$.dirty&1024&&t(1,D=i.iconUrl)},[E,D,v,_,n,g,f,l,F,J,i,S]}class bt extends Ve{constructor(s){super();qe(this,s,ht,dt,He,{})}}export{bt as default};
